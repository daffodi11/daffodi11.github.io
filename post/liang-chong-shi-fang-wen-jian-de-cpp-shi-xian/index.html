<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>文件捆绑：两种释放文件的CPP实现 - Daffodil</title>
<link rel="shortcut icon" href="https://daffodi11.github.io/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://daffodi11.github.io/media/css/tailwind.css">
<link rel="stylesheet" href="https://daffodi11.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="文件捆绑：两种释放文件的CPP实现 - Daffodil - Atom Feed" href="https://daffodi11.github.io/atom.xml">


  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-220193003-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-220193003-2');
  </script>
    

  <meta name="description" content="一、资源释放
这种方法优点是体积小 缺点是容易检测 网上有很多资料
BOOL ReleaseResFile(WORD wResID, LPCTSTR szResType, LPCTSTR szFileName)
{
	if (szResTy..." />
  <meta property="og:title" content="文件捆绑：两种释放文件的CPP实现 - Daffodil">
  <meta property="og:description" content="一、资源释放
这种方法优点是体积小 缺点是容易检测 网上有很多资料
BOOL ReleaseResFile(WORD wResID, LPCTSTR szResType, LPCTSTR szFileName)
{
	if (szResTy..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://daffodi11.github.io/post/liang-chong-shi-fang-wen-jian-de-cpp-shi-xian/" />
  <meta property="og:image" content="https://daffodi11.github.io/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="文件捆绑：两种释放文件的CPP实现 - Daffodil">
  <meta name="twitter:description" content="一、资源释放
这种方法优点是体积小 缺点是容易检测 网上有很多资料
BOOL ReleaseResFile(WORD wResID, LPCTSTR szResType, LPCTSTR szFileName)
{
	if (szResTy...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://daffodi11.github.io/post/liang-chong-shi-fang-wen-jian-de-cpp-shi-xian/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://daffodi11.github.io/media/css/prism-atom-dark.css">
  

  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://daffodi11.github.io" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      Daffodil
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          文件捆绑：两种释放文件的CPP实现
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2022-02-17 · 22 min read</div>
          
            <a href="https://daffodi11.github.io/tag/pkDCRUBB8/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              红队武器开发
            </a>
          
            <a href="https://daffodi11.github.io/tag/2VgSXZx_z/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              redteam
            </a>
          
            <a href="https://daffodi11.github.io/tag/rt7PpEPh7/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              windows
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <h2 id="一-资源释放">一、资源释放</h2>
<p>这种方法优点是体积小 缺点是容易检测 网上有很多资料</p>
<pre><code class="language-cpp">BOOL ReleaseResFile(WORD wResID, LPCTSTR szResType, LPCTSTR szFileName)
{
	if (szResType == NULL || szFileName == NULL)
		return FALSE;

	// 创建文件 
	DWORD dwShareMode = FILE_SHARE_WRITE | FILE_SHARE_READ | FILE_SHARE_DELETE;
	HANDLE  hFile = CreateFile(szFileName, GENERIC_WRITE, dwShareMode, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
	if (hFile == INVALID_HANDLE_VALUE)
		return FALSE;
	
	HRSRC  hrsc = FindResource(NULL, MAKEINTRESOURCE(wResID), szResType);	// 查找资源
	HGLOBAL hG = LoadResource(NULL, hrsc);			// 加载资源
	DWORD  dwSize = SizeofResource(NULL, hrsc);	// 获取资源大小
	if (dwSize &lt;= 0)
		return FALSE;
	
	// 写入文件 
	DWORD   dwWrite = 0;
	WriteFile(hFile, hG, dwSize, &amp;dwWrite, NULL);

	CloseHandle(hFile);
	return dwWrite &gt; 0;
}
ReleaseResFile(IDR_EXE1, L&quot;EXE&quot;, L&quot;C:\\test.exe&quot;);
</code></pre>
<h2 id="二-文件转为byte编译释放">二、文件转为byte编译释放</h2>
<p>这种方式优点是不易被检测  缺点是体积大、麻烦</p>
<h4 id="1-将文件转化为byte生成源码">1、将文件转化为byte生成源码</h4>
<pre><code class="language-cpp">BOOL SaveCode(char *FileName) 
{
	HANDLE hDllFile;
	DWORD dwDllSize;
	LPVOID pDllBuff;
	DWORD BytesRead;
	LPVOID pOutBuff;
	HANDLE hOutFile;
	DWORD BytesWritten;
	
	hDllFile = CreateFile(FileName, GENERIC_READ, 0, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
	if (hDllFile == INVALID_HANDLE_VALUE)
		return FALSE;
	dwDllSize  = GetFileSize(hDllFile, 0);
	
	pDllBuff = VirtualAlloc(NULL, dwDllSize, MEM_COMMIT|MEM_RESERVE, PAGE_READWRITE);
	if (pDllBuff == NULL)
	{
		CloseHandle(hDllFile);
		return FALSE;
	}
	if (!ReadFile(hDllFile, pDllBuff, dwDllSize, &amp;BytesRead, NULL))
	{
		VirtualFree(pDllBuff, 0, MEM_RELEASE);
		CloseHandle(hDllFile);
		return FALSE;
	}
	CloseHandle(hDllFile);
	
	pOutBuff = VirtualAlloc(NULL, (dwDllSize*5-1)+((dwDllSize+32-1)/32*2), MEM_COMMIT|MEM_RESERVE, PAGE_READWRITE);
	if (pOutBuff == NULL)
	{
		VirtualFree(pDllBuff, 0, MEM_RELEASE);
		return FALSE;
	}
	
	char *pDllChar = (char *)pDllBuff;
	char *pOutChar = (char *)pOutBuff;
	for (DWORD i = 0; i &lt; dwDllSize; i++)
	{
		if (i == dwDllSize - 1)
		{
			sprintf(pOutChar, &quot;0x%0.2X&quot;, (unsigned char)*pDllChar++);
			pOutChar += 4;
		}
		else
		{
			sprintf(pOutChar, &quot;0x%0.2X,&quot;, (unsigned char)*pDllChar++);
			pOutChar += 5;
		}
		
		if (i % 32 == 31 || i == dwDllSize - 1)
		{
			*pOutChar++ = '\r';
			*pOutChar++ = '\n';
		}
	}
	VirtualFree(pDllBuff, 0, MEM_RELEASE);
	
	char OutData1[] = &quot;/*\r\n AnyFilesToByte By daffodil\r\n \r\n&quot;
		&quot; 使用 SaveFile(\&quot;xxx.xxx\&quot;);即可生成文件\r\n*/\r\n\r\n&quot;;
	char OutData2[] = &quot;#include &lt;windows.h&gt;\r\n\r\n&quot;;
	char OutData3[64] = {0};
	sprintf(OutData3, &quot;const g_FileSize = %d;\r\n&quot;, dwDllSize);
	char OutData4[] = &quot;unsigned char g_FileBuff[] = {\r\n&quot;;
	char OutData5[] = &quot;};\r\n\r\n&quot;;
	char OutData6[] = &quot;\r\nbool SaveFile(char *FileName)\r\n{\r\n\tbool Result = false;&quot;
		&quot;\r\n\tHANDLE hFile;\r\n\tDWORD dwBytesWritten;\r\n&quot;
		&quot;\thFile = CreateFile(FileName,GENERIC_WRITE,FILE_SHARE_READ,NULL,CREATE_ALWAYS,NULL,NULL);\r\n&quot;
		&quot;\tif (hFile == INVALID_HANDLE_VALUE) Result = false;\r\n&quot;
		&quot;\tif (WriteFile(hFile, g_FileBuff, g_FileSize, &amp;dwBytesWritten, NULL)) Result = true;\r\n&quot;
		&quot;\tCloseHandle(hFile);\r\n\treturn Result;\r\n}\r\n\r\n\r\n\r\nint main(){\r\nSaveFile(\&quot;xxxxx\&quot;);\r\nreturn 0;\r\n}&quot;;
	
	hOutFile = CreateFile(&quot;file.cpp&quot;, GENERIC_WRITE, FILE_SHARE_READ, 0, CREATE_ALWAYS, 0, NULL);
	if (hOutFile == INVALID_HANDLE_VALUE)
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData1, strlen(OutData1), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData2, strlen(OutData2), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData3, strlen(OutData3), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData4, strlen(OutData4), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, pOutBuff, (dwDllSize*5-1)+((dwDllSize+32-1)/32*2), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData5, strlen(OutData5), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	if (!WriteFile(hOutFile, OutData6, strlen(OutData6), &amp;BytesWritten, NULL))
	{
		VirtualFree(pOutBuff, 0, MEM_RELEASE);
		CloseHandle(hOutFile);
		return FALSE;
	}
	VirtualFree(pOutBuff, 0, MEM_RELEASE);
	CloseHandle(hOutFile);
	return TRUE;
}

int main(int argc, char* argv[])
{
	printf(&quot;File is %s\n&quot;, argv[1]);
	SaveCode(argv[1]);
    printf(&quot;OK\n&quot;);
	return 0;
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://daffodi11.github.io/post-images/1645065640562.jpg" alt="" loading="lazy"></figure>
<h4 id="编译源码">编译源码</h4>
<pre><code class="language-CPP">/*
 AnyFilesToByte By daffodil
 
 使用 SaveFile(&quot;xxx.xxx&quot;);即可生成文件
*/

#include &lt;windows.h&gt;

const g_FileSize = 2721;
unsigned char g_FileBuff[] = {
0xFF,0xD8,0xFF,0xE0,0x00,0x10,0x4A,0x46,0x49,0x46,0x00,0x01,0x01,0x01,0x00,0x60,0x00,0x60,0x00,0x00,0xFF,0xDB,0x00,0x43,0x00,0x08,0x06,0x06,0x07,0x06,0x05,0x08,
0x07,0x07,0x07,0x09,0x09,0x08,0x0A,0x0C,0x14,0x0D,0x0C,0x0B,0x0B,0x0C,0x19,0x12,0x13,0x0F,0x14,0x1D,0x1A,0x1F,0x1E,0x1D,0x1A,0x1C,0x1C,0x20,0x24,0x2E,0x27,0x20,
0x22,0x2C,0x23,0x1C,0x1C,0x28,0x37,0x29,0x2C,0x30,0x31,0x34,0x34,0x34,0x1F,0x27,0x39,0x3D,0x38,0x32,0x3C,0x2E,0x33,0x34,0x32,0xFF,0xDB,0x00,0x43,0x01,0x09,0x09,
0x09,0x0C,0x0B,0x0C,0x18,0x0D,0x0D,0x18,0x32,0x21,0x1C,0x21,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,
0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0x32,0xFF,0xC2,
0x00,0x11,0x08,0x00,0x56,0x01,0x2B,0x03,0x01,0x22,0x00,0x02,0x11,0x01,0x03,0x11,0x01,0xFF,0xC4,0x00,0x19,0x00,0x00,0x03,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x03,0x04,0x05,0xFF,0xC4,0x00,0x19,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x01,0x00,0x02,0x03,0x04,0x05,0xFF,0xDA,0x00,0x0C,0x03,0x01,0x00,0x02,0x10,0x03,0x10,0x00,0x00,0x01,0xF2,0x86,0xBD,0xDF,0x0D,0x81,0x54,0x4B,0x86,0xD3,0x4A,
0x43,0x81,0x37,0x49,0xB2,0x06,0xAA,0xB6,0xE9,0xCF,0xA7,0x9F,0xA2,0x96,0x70,0x6C,0x25,0xA5,0x37,0x26,0x9B,0xC9,0xC6,0xC4,0x33,0x40,0x2A,0xA7,0x25,0x21,0xCD,0x5B,
0x87,0x5A,0xD6,0x74,0x6B,0xC0,0x19,0xDB,0xC8,0x80,0xA0,0x6A,0x9B,0x54,0x85,0x27,0x65,0xB4,0xE0,0x07,0x0B,0x7C,0xFA,0x0D,0x6B,0xA7,0x36,0x99,0xED,0xB7,0x2E,0x98,
0x46,0x97,0x86,0xD5,0xB6,0x17,0x06,0xCA,0x8B,0x9A,0x0A,0x34,0xB3,0x73,0x1A,0x19,0xBA,0xD1,0x27,0x2D,0xE7,0x45,0xAB,0x95,0x3E,0x31,0x6B,0xB7,0x92,0x1B,0x75,0x25,
0x14,0x8A,0x21,0x50,0xE1,0x36,0x42,0x66,0xF2,0x6B,0x98,0x25,0xE6,0xA9,0xC2,0xA7,0x3A,0x5C,0xCE,0x7A,0x5A,0x82,0x74,0xA8,0xBC,0xF4,0xA4,0x83,0x52,0xAA,0x52,0xC4,
0x0B,0x21,0xA3,0xA9,0xB1,0xD2,0x28,0xB5,0xE7,0x4E,0x87,0x6F,0x0E,0x46,0xB3,0x32,0xAC,0xA8,0x2C,0xA9,0x6C,0xA1,0xBA,0xB2,0xB5,0x6A,0x1C,0xB2,0x96,0x5A,0x44,0xCE,
0x82,0x9D,0x73,0x46,0x5D,0x25,0xAB,0x77,0xA6,0x77,0x9E,0x92,0x85,0x2D,0x80,0xD2,0x4E,0x92,0x21,0x35,0xA8,0x66,0xA8,0x89,0xAE,0x2B,0xE6,0xBD,0xF0,0xE9,0x7C,0xF5,
0xAC,0xEC,0x67,0x76,0x68,0x96,0x94,0x87,0x06,0x93,0x56,0x68,0x44,0x17,0x3A,0x0E,0x33,0x69,0x88,0xD6,0x07,0x36,0xC9,0x02,0x8D,0xEB,0x2F,0x3C,0xF4,0x6A,0x53,0x9D,
0x66,0x28,0x5D,0x62,0x26,0x92,0xD4,0xEB,0x22,0xCF,0x5A,0x94,0x57,0x99,0x40,0x8D,0x85,0x9B,0x60,0xE5,0xD8,0x39,0x28,0x2C,0xE8,0x03,0x96,0xC2,0x18,0x14,0x30,0x46,
0x80,0x65,0x03,0x5E,0xA1,0x9E,0xB8,0x48,0x3C,0xD3,0x0A,0x40,0x43,0x41,0x29,0x81,0xA6,0x01,0xD0,0x00,0x7F,0xFF,0xC4,0x00,0x21,0x10,0x00,0x02,0x02,0x02,0x03,0x01,
0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x10,0x11,0x20,0x30,0x02,0x31,0x41,0x40,0x21,0x12,0x22,0x32,0xFF,0xDA,0x00,0x08,0x01,0x01,0x00,0x01,
0x05,0x02,0xF8,0x38,0xA1,0x23,0xA2,0xC7,0x85,0x97,0x17,0x85,0xE0,0x9F,0xC4,0x8E,0x3C,0x68,0xF2,0xED,0xF2,0x72,0xA5,0x16,0x58,0xBE,0x9E,0x08,0x51,0xD1,0xED,0xEA,
0xB8,0x58,0x2F,0x81,0x45,0x89,0x9C,0xDC,0xA2,0xE5,0x6A,0x5F,0x0F,0x11,0x9E,0xF4,0xAE,0x6C,0xBD,0xF5,0xB9,0x2F,0xEA,0x87,0xFE,0x52,0x39,0x42,0x10,0xFB,0xA3,0xD1,
0x69,0x42,0xFC,0xDE,0x90,0xCF,0x3C,0xBA,0x50,0x87,0xD7,0xA7,0x51,0xE6,0x85,0x85,0xC5,0x69,0x4B,0x17,0x15,0x82,0x84,0x87,0x1E,0xC2,0xC3,0xCC,0x2C,0xBD,0x2B,0x04,
0x9B,0x1C,0x25,0xA5,0x77,0x0B,0x2B,0x9B,0x8B,0x2C,0xBD,0x57,0xF9,0x9A,0x47,0x8D,0x8A,0x54,0xAC,0x16,0x8B,0x2E,0x7C,0xB2,0xCB,0xC9,0xCF,0x13,0xF8,0x8F,0x47,0x45,
0x88,0x62,0x8F,0xFF,0xC4,0x00,0x1F,0x11,0x00,0x03,0x00,0x02,0x02,0x02,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x11,0x02,0x10,0x12,0x20,0x21,
0x30,0x31,0x41,0x51,0xFF,0xDA,0x00,0x08,0x01,0x03,0x01,0x01,0x3F,0x01,0xF4,0x60,0xBC,0x1C,0x85,0xAB,0xEE,0xC4,0x59,0x19,0x64,0x62,0xCB,0xB6,0xFA,0x52,0xF7,0x4F,
0xC0,0x9C,0x3E,0x4B,0x0E,0x42,0x7D,0x28,0xB5,0x4A,0x52,0xEE,0x9C,0x8A,0x52,0xDD,0x22,0xEA,0x8D,0x88,0xA3,0xC4,0xE2,0x4D,0xBD,0x62,0xBF,0x7A,0x21,0xE4,0x72,0x39,
0x9C,0xF5,0x4B,0xEA,0x5A,0xC4,0x7D,0x11,0xF4,0x23,0xFF,0xC4,0x00,0x19,0x11,0x00,0x03,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x11,0x30,0x40,0x20,0xFF,0xDA,0x00,0x08,0x01,0x02,0x01,0x01,0x3F,0x01,0xC1,0x93,0x85,0x8D,0x0B,0x86,0x77,0xD2,0xFA,0x7E,0xA1,0x09,0xBB,0xC3,0xFF,0xC4,0x00,
0x16,0x10,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x50,0x80,0xFF,0xDA,0x00,0x08,0x01,0x01,0x00,0x06,0x3F,0x02,0x9C,
0x03,0x2F,0xFF,0xC4,0x00,0x22,0x10,0x00,0x03,0x00,0x03,0x01,0x00,0x03,0x01,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x11,0x10,0x21,0x31,0x41,0x20,0x51,
0x61,0x30,0x71,0x81,0x91,0xA1,0xFF,0xDA,0x00,0x08,0x01,0x01,0x00,0x01,0x3F,0x21,0xCA,0xFE,0x28,0x99,0xA2,0x1D,0x3F,0xC1,0x34,0x97,0xD1,0x46,0xC6,0xAE,0xA2,0xF4,
0x5B,0x16,0x98,0xE1,0x8A,0xBD,0x1F,0x29,0xC4,0x28,0xBF,0x31,0xB2,0x98,0x5B,0x37,0x82,0x9A,0xFE,0x4B,0x13,0xE0,0x97,0x43,0xBA,0x23,0x54,0x7F,0xC0,0x42,0xB8,0x98,
0xB9,0x84,0xD6,0xC6,0xFB,0x86,0x34,0x58,0x7D,0x8B,0x18,0xB6,0xCB,0xBD,0x88,0xB1,0x97,0x78,0x5C,0x17,0xF2,0x5F,0x2D,0xA9,0x8D,0x1D,0x38,0xE3,0xE3,0x12,0x56,0xFC,
0x2D,0xA7,0xEE,0x08,0xBA,0x74,0x6C,0xA4,0xD1,0xE1,0xE1,0x61,0x5E,0x84,0x2F,0xB8,0x7B,0x8B,0x70,0xA4,0xF8,0xC1,0x0B,0xE6,0x9B,0x13,0x6B,0x5E,0x0F,0x68,0x6D,0x5F,
0x47,0x80,0xDF,0xE1,0xB7,0x83,0xF2,0x3D,0xE1,0x8F,0x47,0x06,0xF7,0x0B,0x8B,0x05,0xD1,0xE9,0x9D,0x67,0x45,0x2A,0xF8,0x4F,0xE6,0xAB,0xD1,0x94,0x1B,0x17,0x68,0xEF,
0x67,0x44,0x9A,0x4B,0x63,0x84,0x45,0x54,0x6F,0xBF,0xF8,0x24,0x2E,0x09,0x8F,0x63,0x3C,0x10,0xC4,0xE0,0xFE,0xF0,0xB6,0xE7,0xA3,0xFC,0xC2,0x13,0x10,0x84,0xCC,0xCC,
0x12,0x23,0xB0,0x8A,0x68,0xA6,0xAF,0xC2,0xE8,0x6F,0x11,0x6E,0x1A,0x21,0xAA,0x24,0x2A,0x74,0xEF,0xD8,0xE6,0x8D,0xBB,0x8A,0x3C,0x21,0xFC,0x09,0xD0,0x9C,0xC4,0x1A,
0x26,0x20,0x91,0x30,0xB3,0x0D,0x84,0x51,0xF2,0x2B,0x5F,0x42,0x72,0xEB,0x78,0x9F,0x46,0x5E,0x86,0xFB,0x3F,0x13,0xA2,0xFD,0x0B,0x62,0x9F,0xEC,0xA5,0xD9,0x44,0x2C,
0xB1,0x13,0x29,0x7F,0x4A,0x6C,0x4B,0x84,0x21,0x08,0x42,0x62,0x60,0x4A,0x0C,0xF2,0x09,0x6C,0xD1,0xE3,0x62,0x17,0x43,0xD8,0xC9,0xA3,0xDC,0xCF,0xC2,0xF0,0x33,0xA7,
0x54,0x6F,0xD2,0x95,0xDD,0x08,0x51,0xB7,0xD2,0x89,0x88,0x7F,0xBF,0x94,0x21,0x04,0x26,0x78,0x08,0x4D,0x93,0x23,0x17,0xEE,0x17,0xA2,0xA9,0x51,0xB9,0xB6,0x37,0xAA,
0x88,0x4C,0xBC,0xFD,0x1E,0xCB,0x06,0xDF,0xE8,0x9C,0x43,0xFC,0x12,0xDB,0xA2,0xE0,0xD8,0xF4,0xC2,0x62,0x17,0x05,0x89,0x3C,0x53,0xA2,0x42,0xCA,0x14,0x42,0x7B,0xF4,
0x7B,0xDE,0x10,0xFB,0x85,0xA1,0xF4,0xAF,0x1C,0x2C,0x0D,0xA3,0x06,0x6C,0x6F,0x30,0xCE,0x47,0x6C,0x17,0x07,0xA4,0x7F,0xD8,0xAB,0xE8,0xF7,0x14,0x4C,0x4C,0xA2,0x08,
0x51,0x33,0xEC,0x56,0x44,0xCA,0x26,0x23,0xAC,0x48,0x4A,0x71,0x88,0x9E,0x9F,0xA2,0x95,0x68,0xD7,0x33,0x33,0x16,0xB4,0x53,0x65,0xB1,0xA1,0x18,0xFF,0xDA,0x00,0x0C,
0x03,0x01,0x00,0x02,0x00,0x03,0x00,0x00,0x00,0x10,0x15,0x13,0xF1,0x5D,0xE9,0xE6,0x0C,0xD1,0x18,0xE7,0xA8,0x91,0xF8,0x46,0xCA,0x10,0x6C,0x33,0x0D,0x3E,0xD8,0xCA,
0x95,0x44,0x63,0x23,0x38,0xB8,0x5E,0xB9,0x8D,0x38,0xE3,0x10,0x93,0x95,0x24,0xCF,0xDA,0xD3,0xEB,0x73,0x05,0xF1,0x93,0x3C,0x60,0xF6,0x7E,0x5C,0x03,0x64,0x6F,0x63,
0xF5,0x4C,0x65,0x3C,0xCA,0xDC,0x66,0x73,0xA3,0x35,0x78,0xDC,0xCF,0x84,0xE4,0x21,0xC8,0x20,0x7D,0xF8,0xFF,0x00,0x04,0x30,0xBE,0x0C,0x17,0x60,0x7B,0xF8,0x83,0x03,
0xDF,0xFF,0xC4,0x00,0x1C,0x11,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x11,0x21,0x10,0x31,0x20,0x41,0x61,0xFF,
0xDA,0x00,0x08,0x01,0x03,0x01,0x01,0x3F,0x10,0xF1,0x24,0xF3,0x6D,0xB3,0x6C,0x63,0x82,0x4D,0xF2,0x3A,0xB4,0x8B,0x6D,0x86,0x1B,0x7D,0x66,0x7C,0x07,0xD8,0xBE,0x45,
0xB6,0xB3,0xA8,0xBF,0xBE,0x03,0xE6,0xEF,0x82,0x6D,0xB6,0xCD,0xB1,0xD8,0x48,0x83,0x59,0x55,0x70,0x85,0x69,0x2F,0x9B,0xCF,0x43,0x2D,0x1F,0x84,0x59,0x67,0x9C,0xF0,
0x34,0xC6,0x30,0xCD,0x0F,0x09,0x67,0x6E,0xAF,0x91,0xA2,0x12,0x5C,0xB8,0xF0,0x62,0x89,0x2E,0xCA,0xC8,0x16,0x2E,0x38,0x5B,0xA4,0x33,0xEC,0x21,0x73,0xDB,0xBB,0xE2,
0xDD,0xEC,0x71,0x61,0x9F,0x12,0x42,0x4E,0x59,0x25,0x97,0xEE,0x03,0x11,0x33,0x65,0xD9,0xF9,0xE1,0x26,0xD6,0x7C,0x5F,0xFF,0xC4,0x00,0x1B,0x11,0x00,0x03,0x01,0x01,
0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x11,0x10,0x20,0x21,0x30,0x41,0xFF,0xDA,0x00,0x08,0x01,0x02,0x01,0x01,0x3F,0x10,0x16,0x2D,
0x85,0x83,0x0A,0x98,0xD6,0x42,0x7D,0x8C,0x11,0x8D,0x10,0x79,0x08,0x42,0x64,0x21,0x38,0x63,0xF4,0x44,0xD9,0x21,0x29,0x06,0x4E,0xE1,0x08,0x42,0x10,0x68,0x90,0x94,
0x90,0x83,0x44,0xC8,0x24,0x32,0x08,0x20,0x99,0x78,0x66,0x4C,0x64,0x12,0xE1,0x42,0x7B,0xAB,0x13,0x2F,0x4F,0x08,0x5A,0xD1,0xFA,0x33,0xFF,0xC4,0x00,0x23,0x10,0x01,
0x00,0x03,0x01,0x01,0x01,0x00,0x03,0x01,0x00,0x02,0x03,0x00,0x00,0x00,0x00,0x01,0x00,0x11,0x21,0x31,0x41,0x51,0x10,0x61,0x71,0x81,0xA1,0xB1,0x91,0xC1,0xF0,0xFF,
0xDA,0x00,0x08,0x01,0x01,0x00,0x01,0x3F,0x10,0x44,0xEC,0x21,0xC9,0x61,0x9E,0xCE,0x41,0x83,0x0F,0xC1,0xC9,0x50,0x64,0x2A,0x43,0x0A,0x85,0x42,0x9A,0x95,0x10,0xCF,
0x18,0xD2,0xA5,0x66,0xC5,0x57,0xB3,0x3C,0xF6,0x58,0x38,0xA8,0x68,0x40,0x22,0xC0,0xAF,0xE8,0x32,0xD5,0x7F,0x88,0x68,0x75,0xB5,0x04,0xA4,0x69,0x84,0xD3,0x5F,0x23,
0x55,0xF0,0xC6,0xC7,0x18,0x59,0x5D,0x96,0xAF,0xEA,0x35,0x35,0xEC,0x69,0xC7,0x58,0xB7,0x49,0xC8,0x55,0xBB,0x82,0x4A,0x4D,0x8B,0xB5,0x12,0x06,0x7E,0x2E,0x1B,0x08,
0x42,0x0B,0x95,0x53,0x52,0xAA,0xC8,0x72,0x76,0x1B,0xB3,0x08,0xAD,0x7C,0x96,0x15,0x2C,0xC5,0x98,0x68,0x86,0x83,0x15,0xD8,0x4C,0xBD,0x8A,0xB4,0x79,0x3B,0x15,0x7C,
0x83,0xEA,0x3C,0xDF,0x60,0x0B,0xD9,0xC9,0x33,0x6F,0x1F,0x25,0x15,0x43,0x47,0x27,0x83,0x8C,0xB4,0x68,0x57,0x89,0x41,0x7E,0x7B,0x1C,0x27,0xB0,0x4D,0xBE,0xCF,0x07,
0x97,0x1D,0xBC,0xE4,0xB5,0x76,0x25,0xC3,0x9F,0x84,0x87,0x21,0x90,0x61,0x09,0xC4,0x27,0xEE,0x7B,0x2B,0xD6,0x03,0xB4,0x5C,0xB5,0x8D,0x1D,0xB4,0x8B,0x69,0xE7,0xEE,
0x0E,0x02,0x94,0x0B,0x95,0x32,0x51,0xFD,0x0C,0xAD,0x6F,0x1A,0x8F,0x41,0xE9,0x31,0x52,0xF3,0x27,0xCF,0x26,0x93,0x2B,0xC8,0x2E,0x25,0x25,0x2A,0xD7,0xD9,0x88,0xCE,
0xF6,0x66,0x97,0xE5,0x4F,0x47,0x7E,0x4A,0xAE,0x88,0x85,0xA3,0x72,0x83,0x6F,0x9C,0x89,0xE7,0x76,0x2D,0x7F,0x90,0xB2,0xA0,0x69,0xBE,0x10,0x61,0x5F,0x86,0x7F,0x22,
0x53,0x50,0x95,0x1D,0x40,0xDC,0xEA,0x1C,0x61,0x08,0x72,0x7B,0x0C,0x99,0x5B,0xC8,0x05,0x3A,0x62,0xE5,0xA7,0xD8,0xCD,0xCD,0x9E,0x45,0x32,0xD8,0xF6,0x18,0x52,0x85,
0x60,0x62,0x76,0xE0,0xC3,0xEC,0x4A,0x29,0x15,0xAF,0xEC,0x39,0x5F,0xF3,0x33,0x4B,0xEE,0x42,0x9A,0x79,0x2A,0x07,0xC5,0xA8,0x8F,0xFE,0xA8,0xFB,0x80,0xD3,0xF5,0x96,
0xA0,0xF6,0x1B,0xA5,0xE1,0x0F,0x26,0xB0,0x65,0xA0,0xB3,0xE9,0xC1,0x82,0xB6,0x9C,0xEC,0xA3,0x17,0x65,0x24,0xAB,0xC9,0x5B,0x3E,0xA5,0x42,0x06,0x72,0x55,0x10,0x95,
0x92,0xAA,0x1C,0x8F,0x60,0x5E,0x4A,0x5F,0x37,0x14,0xEF,0x17,0xD8,0x63,0xDE,0x4A,0x53,0xFF,0x00,0xC4,0xE4,0x77,0xE4,0x77,0x7C,0x67,0x50,0x30,0x7C,0x25,0x37,0x31,
0x60,0x88,0x31,0x38,0xAE,0xCA,0x0A,0x5B,0xF9,0x02,0x63,0x59,0x49,0xCA,0x48,0xB0,0x5A,0xD7,0x91,0x7B,0xB0,0x4B,0x59,0xD9,0x51,0xA5,0xCA,0x99,0x79,0x93,0x8A,0x35,
0xB4,0xF8,0x10,0x69,0x3F,0xE6,0x3C,0xCE,0x9D,0x8F,0xBE,0x3C,0xFE,0x45,0x2D,0xFE,0x0D,0x25,0x5F,0xE4,0x29,0x71,0xE4,0x3F,0x00,0x84,0xFA,0x96,0x30,0xB8,0x5F,0x72,
0x58,0x16,0xAA,0xBF,0xDC,0x14,0x18,0x4B,0xAB,0x3E,0xC3,0xED,0x61,0x3E,0x1D,0xF9,0x07,0x69,0xA7,0xE3,0x06,0xE9,0x77,0xEC,0x51,0x1F,0xE9,0x36,0x4D,0x83,0x55,0x06,
0xE6,0xDD,0x77,0xEF,0xFF,0x00,0x54,0x17,0x41,0x6F,0x91,0x36,0x11,0x51,0x40,0x4E,0xDF,0xB0,0xC9,0x97,0xFC,0x9E,0xB3,0x18,0x60,0x90,0x65,0xFB,0x16,0x22,0x5D,0x4B,
0x70,0x76,0xA2,0xD1,0xFC,0x9A,0xDF,0x7D,0x85,0x61,0xD7,0xEC,0x00,0xFE,0xE5,0x91,0xBF,0xE1,0xCC,0x0D,0x8E,0x6E,0x74,0xBF,0xC2,0xA0,0xB2,0xA0,0x40,0x84,0x5C,0x54,
0xC9,0x70,0x02,0xB2,0x50,0x50,0xDB,0x76,0x1A,0xE3,0xFB,0x0C,0xC8,0xF7,0xC8,0xAA,0x18,0x1B,0x71,0xA5,0xA6,0xF8,0xCC,0x9D,0x17,0xB1,0x42,0x71,0x22,0x03,0x42,0x9B,
0x64,0xD1,0xC5,0xAF,0x22,0x2F,0x6E,0xC0,0x56,0xDC,0x52,0xA8,0xDA,0x87,0x90,0x90,0x76,0x95,0x3A,0x63,0x1B,0x07,0x62,0x7C,0x80,0xD7,0xEA,0x51,0x51,0x86,0x75,0xC2,
0xE8,0xE4,0x2F,0xFA,0x20,0x01,0xB8,0xB7,0x8C,0xA8,0x06,0xB3,0xD8,0x01,0x1A,0x74,0x81,0x96,0xB6,0xE6,0x08,0x5B,0xF1,0xC4,0x08,0x62,0x22,0xFE,0xA1,0xE5,0xEF,0xB0,
0x17,0x90,0x51,0x8F,0x67,0x27,0x06,0x6C,0x06,0xC8,0x63,0x73,0xB2,0x57,0x2F,0x21,0x42,0xC9,0xE0,0xFF,0x00,0x63,0x46,0x73,0xE4,0xAC,0x55,0x3C,0x88,0x28,0x11,0xC9,
0x59,0xDB,0xEB,0xB3,0x5A,0x15,0x64,0xC0,0x6C,0x84,0x05,0x82,0xBF,0xB8,0x28,0xFD,0x9F,0xF5,0x16,0x8D,0x6E,0x47,0x5F,0x4A,0x97,0x43,0x87,0x42,0x3D,0x3A,0xB2,0x9F,
0xE4,0x54,0x29,0xCA,0x32,0x17,0x15,0x02,0xBC,0x80,0x2C,0x64,0xB3,0x1E,0xF2,0x37,0xD8,0x5C,0xA8,0xBF,0x92,0x8F,0x62,0x10,0xAF,0x20,0x5C,0x44,0xC3,0xB0,0x0C,0x0B,
0xD9,0x42,0xF6,0x35,0x73,0x20,0x96,0xC9,0x1C,0x42,0x43,0x52,0xCB,0xD0,0x7E,0x31,0xF7,0x20,0xF9,0x19,0x4E,0xBF,0xC8,0x71,0xF2,0x30,0x52,0xE7,0x65,0x19,0xAB,0x1A,
0x65,0xA6,0x8F,0xE3,0x02,0xC9,0x6F,0xFD,0xC6,0x11,0xD7,0x1F,0x51,0x16,0xF2,0x08,0x66,0xFE,0xE0,0x28,0x5C,0x6C,0x1D,0x1C,0x7B,0x71,0x89,0xAD,0x7B,0x08,0xB8,0xD7,
0xD9,0x4A,0x03,0x14,0x5C,0xE4,0xBA,0xBE,0x76,0xA0,0xB5,0xC9,0xAF,0xE1,0x2E,0xE3,0x04,0x7B,0x73,0xE9,0x00,0x92,0x88,0x39,0x08,0x13,0xD4,0xDA,0x5B,0x6A,0x35,0x95,
0x10,0x6A,0xA0,0xEF,0x33,0xF7,0x29,0x48,0x0E,0x13,0x59,0x6D,0x3D,0x95,0xB3,0x4D,0xBA,0x90,0xD6,0x5C,0xF2,0x3E,0xE4,0x16,0xDD,0x2F,0x90,0x8B,0xA1,0x37,0x8B,0x71,
0x2F,0xB0,0xD4,0x65,0x7E,0x09,0x14,0x9E,0xD9,0x0A,0xC5,0xCB,0xEC,0xB2,0xB6,0x7E,0x98,0xA2,0x81,0x6A,0x58,0x5F,0x28,0x9E,0xFF,0x00,0x62,0x5C,0xF2,0x68,0x37,0x54,
0x4F,0x4A,0x8F,0xD4,0xAF,0x0C,0x42,0xB7,0x44,0x57,0xAF,0xF0,0xFE,0x01,0xF5,0x07,0xB3,0x04,0x5A,0xC9,0x6E,0x32,0xC3,0x14,0x7F,0x00,0xD9,0xB4,0x0A,0x21,0x6E,0xF9,
0x00,0xE3,0x04,0x9B,0x0E,0xA0,0xE5,0xDC,0xF5,0xF0,0x96,0x9F,0xD8,0xA9,0xD8,0xB7,0xA1,0x57,0x29,0x76,0xEE,0x1C,0x08,0xF2,0xFD,0x44,0x5B,0x2A,0x9C,0x80,0xC3,0xAB,
0x8C,0x91,0xF2,0x26,0x43,0x1B,0x9A,0x07,0xEC,0xAD,0x81,0x4C,0x65,0x2A,0x0E,0x02,0xC1,0x76,0xA2,0x17,0x79,0x51,0x4B,0x83,0xDE,0xC4,0x0C,0x2B,0x62,0xB7,0x3F,0xFF,
0xD9
};

bool SaveFile(char *FileName)
{
	bool Result = false;
	HANDLE hFile;
	DWORD dwBytesWritten;
	hFile = CreateFile(FileName,GENERIC_WRITE,FILE_SHARE_READ,NULL,CREATE_ALWAYS,NULL,NULL);
	if (hFile == INVALID_HANDLE_VALUE) Result = false;
	if (WriteFile(hFile, g_FileBuff, g_FileSize, &amp;dwBytesWritten, NULL)) Result = true;
	CloseHandle(hFile);
	return Result;
}

int main(){
SaveFile(&quot;1.jpg&quot;);
return 0;
}
</code></pre>
<h4 id="编译运行释放文件">编译运行释放文件</h4>
<figure data-type="image" tabindex="2"><img src="https://daffodi11.github.io/post-images/1645065936639.jpg" alt="" loading="lazy"></figure>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E8%B5%84%E6%BA%90%E9%87%8A%E6%94%BE">一、资源释放</a></li>
<li><a href="#%E4%BA%8C-%E6%96%87%E4%BB%B6%E8%BD%AC%E4%B8%BAbyte%E7%BC%96%E8%AF%91%E9%87%8A%E6%94%BE">二、文件转为byte编译释放</a><br>
*
<ul>
<li><a href="#1-%E5%B0%86%E6%96%87%E4%BB%B6%E8%BD%AC%E5%8C%96%E4%B8%BAbyte%E7%94%9F%E6%88%90%E6%BA%90%E7%A0%81">1、将文件转化为byte生成源码</a></li>
<li><a href="#%E7%BC%96%E8%AF%91%E6%BA%90%E7%A0%81">编译源码</a></li>
<li><a href="#%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E9%87%8A%E6%94%BE%E6%96%87%E4%BB%B6">编译运行释放文件</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://daffodi11.github.io/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://daffodi11.github.io/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
  
    
      <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script type="application/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script type="application/javascript">

  var gitalk = new Gitalk({
    clientID: '14567eb76fbd8517a142',
    clientSecret: '0554531da4bcec4ecfed7c23af678bb541868c75',
    repo: 'daffodi11.github.io',
    owner: 'daffodi11',
    admin: ['daffodi11'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

    
  
</body>

</html>